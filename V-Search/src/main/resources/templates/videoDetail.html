<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.8.1/video.min.js"></script>
	<link href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.8.1/video-js.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/videojs-thumbnails/0.1.1/videojs.thumbnails.css"
		rel="stylesheet">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body layout:fragment="content">
	<video width="640" height="480" id="VideoPlayer" class="video-js vjs-default-skin">
		<source th:src="@{'data:video/mp4;base64,' + ${videoData}}" type="video/mp4">
		<!-- 다른 동영상 형식에 대한 소스 추가 -->
	</video>

	<form th:action="@{'/recommend/toggle/'+ ${videoNo}}" method="POST">
		<button type="submit">추천</button>
	</form>

	<form th:action="@{'/delvideos/' + ${videoNo}}" method="POST">
		<input type="hidden" name="_method" value="DELETE">
		<input type="submit" value="동영상 삭제">
	</form>

	<div>
		<form th:action="@{'/api/subscribe/'+${videoNo}}" method="POST">
			<button type="submit">구독</button>
		</form>
		<form th:action="@{'/api/subscribe/'+${videoNo}}" method="GET">
			<button type="submit">구독취소</button>
		</form>
	</div>
	<p>subscribeCount: <span th:text="${userDto.subscribeCount}"></span></p>
	<p>Recommendations: <span th:text="${recommendationsCount}"></span></p>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script>
		var player = videojs("VideoPlayer", {
			controls: true,
			playsinline: true,
			preload: "auto",
			controlBar:
			{
				playToggle: true //재생, 일지정지 토글
				, pictureInPictureToggle: false
				, remainingTimeDisplay: true //남은 시간 표시
				, progressControl: true //재생 진행바
			}
		});
	</script>

</body>

</html>